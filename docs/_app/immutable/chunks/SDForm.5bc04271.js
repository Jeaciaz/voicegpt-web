import{_ as Ae}from"./preload-helper.41c905a7.js";import{b as Me}from"./paths.979c0bfa.js";import{S as ee,i as te,s as le,e as x,b as I,v as Ne,d as k,f as qe,g as E,h as p,C as K,D as Q,E as X,F as Z,k as w,q as G,a as V,l as S,m as q,r as Y,c as P,n as h,G as g,u as $,y,z as J,A as j,B as H,M as W,O as Ie,J as Fe,L as be,N as Te,R as Be,w as Le}from"./index.4cd36e52.js";function ue(){return window.Telegram.WebApp}async function ot(l){await Ae(()=>import(`${Me}/telegram-web-app.js`),[],import.meta.url);const{MainButton:e}=ue();Re(!1),e.setText("Сгенерировать").onClick(l).show()}function Re(l){const{MainButton:e,themeParams:n}=ue();l?e.enable().setParams({color:n.button_color}):e.disable().setParams({color:n.hint_color})}function mt(l){alert("start sendData");const{sendData:e}=ue();Oe(!0),alert("about to send data"),alert(JSON.stringify(l)),e(JSON.stringify(l)),alert("sent data")}function Oe(l){const{MainButton:e}=ue();l?e.showProgress():e.hideProgress()}function Ue(l){let e;const n=l[3].default,t=K(n,l,l[2],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,u){t&&t.m(a,u),e=!0},p(a,u){t&&t.p&&(!e||u&4)&&Q(t,n,a,a[2],e?Z(n,a[2],u,null):X(a[2]),null)},i(a){e||(E(t,a),e=!0)},o(a){k(t,a),e=!1},d(a){t&&t.d(a)}}}function Ce(l){let e,n,t,a,u,i,r=l[1]&&ge();const s=l[3].default,f=K(s,l,l[2],null);return{c(){e=w("label"),n=w("span"),t=G(l[0]),a=V(),r&&r.c(),u=V(),f&&f.c(),this.h()},l(m){e=S(m,"LABEL",{class:!0});var c=q(e);n=S(c,"SPAN",{class:!0});var o=q(n);t=Y(o,l[0]),a=P(o),r&&r.l(o),o.forEach(p),u=P(c),f&&f.l(c),c.forEach(p),this.h()},h(){h(n,"class","text-sm text-[var(--theme-hint-color)] pl-1.5"),h(e,"class","flex flex-col")},m(m,c){I(m,e,c),g(e,n),g(n,t),g(n,a),r&&r.m(n,null),g(e,u),f&&f.m(e,null),i=!0},p(m,c){(!i||c&1)&&$(t,m[0]),m[1]?r||(r=ge(),r.c(),r.m(n,null)):r&&(r.d(1),r=null),f&&f.p&&(!i||c&4)&&Q(f,s,m,m[2],i?Z(s,m[2],c,null):X(m[2]),null)},i(m){i||(E(f,m),i=!0)},o(m){k(f,m),i=!1},d(m){m&&p(e),r&&r.d(),f&&f.d(m)}}}function ge(l){let e,n;return{c(){e=w("span"),n=G("*"),this.h()},l(t){e=S(t,"SPAN",{class:!0});var a=q(e);n=Y(a,"*"),a.forEach(p),this.h()},h(){h(e,"class","text-sm text-red-500")},m(t,a){I(t,e,a),g(e,n)},d(t){t&&p(e)}}}function ye(l){let e,n,t,a;const u=[Ce,Ue],i=[];function r(s,f){return s[0]!==void 0?0:1}return e=r(l),n=i[e]=u[e](l),{c(){n.c(),t=x()},l(s){n.l(s),t=x()},m(s,f){i[e].m(s,f),I(s,t,f),a=!0},p(s,[f]){let m=e;e=r(s),e===m?i[e].p(s,f):(Ne(),k(i[m],1,1,()=>{i[m]=null}),qe(),n=i[e],n?n.p(s,f):(n=i[e]=u[e](s),n.c()),E(n,1),n.m(t.parentNode,t))},i(s){a||(E(n),a=!0)},o(s){k(n),a=!1},d(s){i[e].d(s),s&&p(t)}}}function Je(l,e,n){let{$$slots:t={},$$scope:a}=e,{label:u=void 0}=e,{required:i=!1}=e;return l.$$set=r=>{"label"in r&&n(0,u=r.label),"required"in r&&n(1,i=r.required),"$$scope"in r&&n(2,a=r.$$scope)},[u,i,a,t]}class de extends ee{constructor(e){super(),te(this,e,Je,ye,le,{label:0,required:1})}}function pe(l){let e,n=l[7].message+"",t;return{c(){e=w("span"),t=G(n),this.h()},l(a){e=S(a,"SPAN",{class:!0});var u=q(e);t=Y(u,n),u.forEach(p),this.h()},h(){h(e,"class","text-xs text-red-500")},m(a,u){I(a,e,u),g(e,t)},p(a,u){u&128&&n!==(n=a[7].message+"")&&$(t,n)},d(a){a&&p(e)}}}function je(l){let e,n,t,a,u,i,r=l[8]&&l[7]!==void 0&&pe(l);return{c(){e=w("input"),t=V(),r&&r.c(),a=x(),this.h()},l(s){e=S(s,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0,"aria-label":!0}),t=P(s),r&&r.l(s),a=x(),this.h()},h(){h(e,"type",l[6]),h(e,"name",l[4]),h(e,"placeholder",l[2]),e.disabled=l[3],e.required=l[5],e.value=l[0],h(e,"class",n="border border-[var(--theme-hint-color)] rounded-md p-1 focus-visible:border-[var(--theme-text-color)] outline-0 "+(l[8]?"invalid:border-red-500":"")+" "+(l[8]&&l[7]!==void 0?"border-red-500":"")),h(e,"aria-label",l[1])},m(s,f){I(s,e,f),I(s,t,f),r&&r.m(s,f),I(s,a,f),u||(i=[W(e,"input",l[10]),W(e,"change",l[13]),W(e,"focus",l[14]),W(e,"blur",l[15])],u=!0)},p(s,f){f&64&&h(e,"type",s[6]),f&16&&h(e,"name",s[4]),f&4&&h(e,"placeholder",s[2]),f&8&&(e.disabled=s[3]),f&32&&(e.required=s[5]),f&1&&e.value!==s[0]&&(e.value=s[0]),f&384&&n!==(n="border border-[var(--theme-hint-color)] rounded-md p-1 focus-visible:border-[var(--theme-text-color)] outline-0 "+(s[8]?"invalid:border-red-500":"")+" "+(s[8]&&s[7]!==void 0?"border-red-500":""))&&h(e,"class",n),f&2&&h(e,"aria-label",s[1]),s[8]&&s[7]!==void 0?r?r.p(s,f):(r=pe(s),r.c(),r.m(a.parentNode,a)):r&&(r.d(1),r=null)},d(s){s&&p(e),s&&p(t),r&&r.d(s),s&&p(a),u=!1,Ie(i)}}}function He(l){let e,n;return e=new de({props:{label:l[1],required:l[5],$$slots:{default:[je]},$$scope:{ctx:l}}}),{c(){y(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,a){j(e,t,a),n=!0},p(t,[a]){const u={};a&2&&(u.label=t[1]),a&32&&(u.required=t[5]),a&131583&&(u.$$scope={dirty:a,ctx:t}),e.$set(u)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function We(l,e,n){let{label:t=void 0}=e,{defaultValue:a=""}=e,{value:u=a}=e,{placeholder:i=void 0}=e,{disabled:r=!1}=e,{name:s=void 0}=e,{required:f=!1}=e,{validate:m=void 0}=e,{type:c="text"}=e,o,B=!1;function L(_){return c.match(/^number|range$/)?+_:_}function D(_){n(7,o=m==null?void 0:m(L(_)))}function z(_){n(0,u=L(_.currentTarget.value))}const O=_=>D(_.currentTarget.value),b=()=>n(8,B=!1),N=()=>n(8,B=!0);return l.$$set=_=>{"label"in _&&n(1,t=_.label),"defaultValue"in _&&n(11,a=_.defaultValue),"value"in _&&n(0,u=_.value),"placeholder"in _&&n(2,i=_.placeholder),"disabled"in _&&n(3,r=_.disabled),"name"in _&&n(4,s=_.name),"required"in _&&n(5,f=_.required),"validate"in _&&n(12,m=_.validate),"type"in _&&n(6,c=_.type)},[u,t,i,r,s,f,c,o,B,D,z,a,m,O,b,N]}class ce extends ee{constructor(e){super(),te(this,e,We,He,le,{label:1,defaultValue:11,value:0,placeholder:2,disabled:3,name:4,required:5,validate:12,type:6})}}function ve(l,e,n){const t=l.slice();return t[3]=e[n].label,t[6]=e[n].value,t}function Ee(l){let e,n;return e=new de({props:{label:l[3],$$slots:{default:[ze]},$$scope:{ctx:l}}}),{c(){y(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,a){j(e,t,a),n=!0},p(t,a){const u={};a&8&&(u.label=t[3]),a&519&&(u.$$scope={dirty:a,ctx:t}),e.$set(u)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function De(l){let e,n,t=l[3]+"",a,u,i,r;function s(){return l[5](l[6])}return{c(){e=w("li"),n=w("button"),a=G(t),u=V(),this.h()},l(f){e=S(f,"LI",{class:!0});var m=q(e);n=S(m,"BUTTON",{type:!0,class:!0});var c=q(n);a=Y(c,t),c.forEach(p),u=P(m),m.forEach(p),this.h()},h(){h(n,"type","button"),h(n,"class","item cursor-pointer svelte-fv5mem"),be(n,"selected",l[0]===l[6]),h(e,"class","[&:not(:last-child)]:mr-4")},m(f,m){I(f,e,m),g(e,n),g(n,a),g(e,u),i||(r=W(n,"click",s),i=!0)},p(f,m){l=f,m&4&&t!==(t=l[3]+"")&&$(a,t),m&5&&be(n,"selected",l[0]===l[6])},d(f){f&&p(e),i=!1,r()}}}function ze(l){let e,n,t,a=l[2],u=[];for(let i=0;i<a.length;i+=1)u[i]=De(ve(l,a,i));return{c(){e=w("ul");for(let i=0;i<u.length;i+=1)u[i].c();n=V(),t=w("input"),this.h()},l(i){e=S(i,"UL",{class:!0});var r=q(e);for(let s=0;s<u.length;s+=1)u[s].l(r);r.forEach(p),n=P(i),t=S(i,"INPUT",{type:!0,name:!0}),this.h()},h(){h(e,"class","flex flex-nowrap list-none overflow-auto max-w-full pt-1"),h(t,"type","hidden"),h(t,"name",l[1]),t.value=l[0]},m(i,r){I(i,e,r);for(let s=0;s<u.length;s+=1)u[s]&&u[s].m(e,null);I(i,n,r),I(i,t,r)},p(i,r){if(r&5){a=i[2];let s;for(s=0;s<a.length;s+=1){const f=ve(i,a,s);u[s]?u[s].p(f,r):(u[s]=De(f),u[s].c(),u[s].m(e,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=a.length}r&2&&h(t,"name",i[1]),r&1&&(t.value=i[0])},d(i){i&&p(e),Fe(u,i),i&&p(n),i&&p(t)}}}function Ge(l){let e,n,t=l[2].length>0&&Ee(l);return{c(){t&&t.c(),e=x()},l(a){t&&t.l(a),e=x()},m(a,u){t&&t.m(a,u),I(a,e,u),n=!0},p(a,[u]){a[2].length>0?t?(t.p(a,u),u&4&&E(t,1)):(t=Ee(a),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(Ne(),k(t,1,1,()=>{t=null}),qe())},i(a){n||(E(t),n=!0)},o(a){k(t),n=!1},d(a){t&&t.d(a),a&&p(e)}}}function Ye(l,e,n){let{name:t=void 0}=e,{options:a=[]}=e,{label:u=void 0}=e,{defaultValue:i=a[0].value}=e,{value:r=i}=e;const s=f=>n(0,r=f);return l.$$set=f=>{"name"in f&&n(1,t=f.name),"options"in f&&n(2,a=f.options),"label"in f&&n(3,u=f.label),"defaultValue"in f&&n(4,i=f.defaultValue),"value"in f&&n(0,r=f.value)},[r,t,a,u,i,s]}class ke extends ee{constructor(e){super(),te(this,e,Ye,Ge,le,{name:1,options:2,label:3,defaultValue:4,value:0})}}function Ke(l){let e,n,t,a,u,i,r,s,f,m;return{c(){e=w("div"),n=w("span"),t=G(l[2]),a=V(),u=w("input"),i=V(),r=w("span"),s=G(l[1]),this.h()},l(c){e=S(c,"DIV",{class:!0});var o=q(e);n=S(o,"SPAN",{});var B=q(n);t=Y(B,l[2]),B.forEach(p),a=P(o),u=S(o,"INPUT",{class:!0,type:!0,max:!0,min:!0,step:!0,name:!0}),i=P(o),r=S(o,"SPAN",{});var L=q(r);s=Y(L,l[1]),L.forEach(p),o.forEach(p),this.h()},h(){h(u,"class","mx-1 flex-1 accent-[var(--theme-button-color)]"),h(u,"type","range"),u.value=l[0],h(u,"max",l[1]),h(u,"min",l[2]),h(u,"step",l[3]),h(u,"name",l[4]),h(e,"class","flex text-sm")},m(c,o){I(c,e,o),g(e,n),g(n,t),g(e,a),g(e,u),g(e,i),g(e,r),g(r,s),f||(m=W(u,"input",l[8]),f=!0)},p(c,o){o&4&&$(t,c[2]),o&1&&(u.value=c[0]),o&2&&h(u,"max",c[1]),o&4&&h(u,"min",c[2]),o&8&&h(u,"step",c[3]),o&16&&h(u,"name",c[4]),o&2&&$(s,c[1])},d(c){c&&p(e),f=!1,m()}}}function Qe(l){let e,n;return e=new de({props:{label:l[5]+": "+l[0],$$slots:{default:[Ke]},$$scope:{ctx:l}}}),{c(){y(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,a){j(e,t,a),n=!0},p(t,[a]){const u={};a&33&&(u.label=t[5]+": "+t[0]),a&543&&(u.$$scope={dirty:a,ctx:t}),e.$set(u)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Xe(l,e,n){let{max:t}=e,{min:a}=e,{step:u=1}=e,{defaultValue:i=(t+a)/2}=e,{value:r=i}=e,{name:s=void 0}=e,{label:f=void 0}=e;function m(o){n(0,r=+o)}const c=o=>m(o.currentTarget.value);return l.$$set=o=>{"max"in o&&n(1,t=o.max),"min"in o&&n(2,a=o.min),"step"in o&&n(3,u=o.step),"defaultValue"in o&&n(7,i=o.defaultValue),"value"in o&&n(0,r=o.value),"name"in o&&n(4,s=o.name),"label"in o&&n(5,f=o.label)},[r,t,a,u,s,f,m,i,c]}class Ze extends ee{constructor(e){super(),te(this,e,Xe,Qe,le,{max:1,min:2,step:3,defaultValue:7,value:0,name:4,label:5})}}const xe=()=>{},$e=(l,...e)=>e.reduce((n,t)=>t(n),l),et=l=>({}),we=l=>({}),tt=l=>({}),Se=l=>({}),lt=l=>({}),Ve=l=>({}),nt=l=>({}),Pe=l=>({});function at(l){let e,n,t,a,u,i,r,s,f,m,c,o,B,L,D,z,O,b,N,_,C,se,R,re,_e;const ie=l[8]["pre-basic"],A=K(ie,l,l[7],Pe);a=new ce({props:{name:l[3].prompt,label:"Запрос",placeholder:"elden ring, epic",required:!0}}),i=new ce({props:{name:l[3].negativePrompt,label:"Антизапрос",placeholder:"realism"}}),s=new ke({props:{name:l[3].dimensions,options:l[2],label:"Размер изображения: "}});const fe=l[8]["post-basic"],M=K(fe,l,l[7],Ve),oe=l[8]["pre-advanced"],F=K(oe,l,l[7],Se);O=new ke({props:{name:l[3].samplerMethod,options:l[1],label:"Метод семплера"}}),N=new Ze({props:{name:l[3].samplerSteps,min:20,max:40,label:"Шаги семплера",defaultValue:20}}),C=new ce({props:{name:l[3].seed,label:"Seed",placeholder:"1234567890",type:"number"}});const me=l[8]["post-advanced"],T=K(me,l,l[7],we);return{c(){e=w("form"),A&&A.c(),n=V(),t=w("div"),y(a.$$.fragment),u=V(),y(i.$$.fragment),r=V(),y(s.$$.fragment),f=V(),M&&M.c(),m=V(),c=w("details"),o=w("summary"),B=G("Продвинутые опции"),L=V(),D=w("div"),F&&F.c(),z=V(),y(O.$$.fragment),b=V(),y(N.$$.fragment),_=V(),y(C.$$.fragment),se=V(),T&&T.c(),this.h()},l(d){e=S(d,"FORM",{class:!0});var v=q(e);A&&A.l(v),n=P(v),t=S(v,"DIV",{class:!0});var ne=q(t);J(a.$$.fragment,ne),u=P(ne),J(i.$$.fragment,ne),ne.forEach(p),r=P(v),J(s.$$.fragment,v),f=P(v),M&&M.l(v),m=P(v),c=S(v,"DETAILS",{});var ae=q(c);o=S(ae,"SUMMARY",{});var he=q(o);B=Y(he,"Продвинутые опции"),he.forEach(p),L=P(ae),D=S(ae,"DIV",{class:!0});var U=q(D);F&&F.l(U),z=P(U),J(O.$$.fragment,U),b=P(U),J(N.$$.fragment,U),_=P(U),J(C.$$.fragment,U),se=P(U),T&&T.l(U),U.forEach(p),ae.forEach(p),v.forEach(p),this.h()},h(){h(t,"class","grid grid-cols-2 gap-2"),h(D,"class","grid gap-4"),h(e,"class","grid gap-4 p-4 mt-4")},m(d,v){I(d,e,v),A&&A.m(e,null),g(e,n),g(e,t),j(a,t,null),g(t,u),j(i,t,null),g(e,r),j(s,e,null),g(e,f),M&&M.m(e,null),g(e,m),g(e,c),g(c,o),g(o,B),g(c,L),g(c,D),F&&F.m(D,null),g(D,z),j(O,D,null),g(D,b),j(N,D,null),g(D,_),j(C,D,null),g(D,se),T&&T.m(D,null),l[10](e),R=!0,re||(_e=[W(e,"submit",Te(l[11])),W(e,"input",l[9])],re=!0)},p(d,[v]){A&&A.p&&(!R||v&128)&&Q(A,ie,d,d[7],R?Z(ie,d[7],v,nt):X(d[7]),Pe),M&&M.p&&(!R||v&128)&&Q(M,fe,d,d[7],R?Z(fe,d[7],v,lt):X(d[7]),Ve),F&&F.p&&(!R||v&128)&&Q(F,oe,d,d[7],R?Z(oe,d[7],v,tt):X(d[7]),Se),T&&T.p&&(!R||v&128)&&Q(T,me,d,d[7],R?Z(me,d[7],v,et):X(d[7]),we)},i(d){R||(E(A,d),E(a.$$.fragment,d),E(i.$$.fragment,d),E(s.$$.fragment,d),E(M,d),E(F,d),E(O.$$.fragment,d),E(N.$$.fragment,d),E(C.$$.fragment,d),E(T,d),R=!0)},o(d){k(A,d),k(a.$$.fragment,d),k(i.$$.fragment,d),k(s.$$.fragment,d),k(M,d),k(F,d),k(O.$$.fragment,d),k(N.$$.fragment,d),k(C.$$.fragment,d),k(T,d),R=!1},d(d){d&&p(e),A&&A.d(d),H(a),H(i),H(s),M&&M.d(d),F&&F.d(d),H(O),H(N),H(C),T&&T.d(d),l[10](null),re=!1,Ie(_e)}}}function ut(l){const e={};return l.forEach((n,t)=>{e[t]=n}),e}function st(l,e,n){let{$$slots:t={},$$scope:a}=e,{form:u=null}=e,{parseExtra:i=b=>b}=e,{onSubmit:r=xe}=e;const s=[{label:"Euler 𝛼",value:"Euler a"},{label:"Heun",value:"Heun"},{label:"DPM++ M2",value:"DPM++ 2M"},{label:"DDIM",value:"DDIM"}],f=[{label:"Квадрат [512x512]",value:"square"},{label:"Портрет [512x768]",value:"portrait"},{label:"Пейзаж [768x512]",value:"landscape"}],m={square:{width:512,height:512},portrait:{width:512,height:768},landscape:{width:768,height:512}},c={prompt:"prompt",negativePrompt:"negative_prompt",dimensions:"dimensions",samplerMethod:"sampler_method",samplerSteps:"sampler_steps",seed:"seed"};function o({[c.dimensions]:b,...N}){if(typeof b=="string"){if(!(b in m))throw Error("Неизвестное разрешение картинки");const{width:_,height:C}=m[b]||m.square;return{...N,width:_,height:C}}return N}function B({[c.samplerSteps]:b,[c.seed]:N,..._}){return{..._,[c.samplerSteps]:Number(b),[c.seed]:Number(N)}}function L(b){const N=new FormData(b);try{const _=$e(N,ut,B,o,i);Promise.resolve(_).then(r)}catch(_){if(_ instanceof Error){alert(_.message);return}alert("Что-то пошло не так, проверьте введенные данные и попробуйте снова")}}function D(b){Be.call(this,l,b)}function z(b){Le[b?"unshift":"push"](()=>{u=b,n(0,u)})}const O=b=>L(b.currentTarget);return l.$$set=b=>{"form"in b&&n(0,u=b.form),"parseExtra"in b&&n(5,i=b.parseExtra),"onSubmit"in b&&n(6,r=b.onSubmit),"$$scope"in b&&n(7,a=b.$$scope)},[u,s,f,c,L,i,r,a,t,D,z,O]}class ct extends ee{constructor(e){super(),te(this,e,st,at,le,{form:0,parseExtra:5,onSubmit:6})}}export{de as L,Ze as R,ct as S,Re as a,mt as b,ot as s};
