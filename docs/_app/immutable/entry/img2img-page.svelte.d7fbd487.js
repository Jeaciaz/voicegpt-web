import{S,i as A,s as M,y as h,z as $,A as v,g as E,d as q,B as w,k as _,a as F,l as g,c as B,m as D,h as m,n as c,N as b,b as d,O as C,P as y,Q as G,q as I,r as k,M as L,J as U,u as P,E as R,w as N,R as j,T as O,o as T}from"../chunks/index.98711fea.js";import{L as V,S as z,s as H,R as J,a as Q,b as W,c as K}from"../chunks/SDForm.aa89da41.js";function X(a){let e,u,t,n,o=a[3].name+"",f;return{c(){e=_("img"),t=F(),n=_("span"),f=I(o),this.h()},l(l){e=g(l,"IMG",{src:!0,alt:!0,class:!0}),t=B(l),n=g(l,"SPAN",{class:!0});var i=D(n);f=k(i,o),i.forEach(m),this.h()},h(){L(e.src,u=URL.createObjectURL(a[3]))||c(e,"src",u),c(e,"alt",""),c(e,"class","pr-2 h-8"),c(n,"class","whitespace-nowrap overflow-x-hidden text-ellipsis")},m(l,i){d(l,e,i),d(l,t,i),d(l,n,i),U(n,f)},p(l,i){i&8&&!L(e.src,u=URL.createObjectURL(l[3]))&&c(e,"src",u),i&8&&o!==(o=l[3].name+"")&&P(f,o)},d(l){l&&m(e),l&&m(t),l&&m(n)}}}function Y(a){let e;return{c(){e=I("Выбрать изображение...")},l(u){e=k(u,"Выбрать изображение...")},m(u,t){d(u,e,t)},p:R,d(u){u&&m(e)}}}function Z(a){let e,u,t,n,o;function f(s,r){return s[3]?X:Y}let l=f(a),i=l(a);return{c(){e=_("input"),u=F(),t=_("div"),i.c(),this.h()},l(s){e=g(s,"INPUT",{type:!0,name:!0,class:!0,accept:!0}),u=B(s),t=g(s,"DIV",{class:!0});var r=D(t);i.l(r),r.forEach(m),this.h()},h(){c(e,"type","file"),c(e,"name",a[1]),e.required=a[2],c(e,"class","absolute opacity-0 svelte-cvpwnt"),c(e,"accept","image/png,image/jpeg"),c(t,"class","p-1 border rounded flex items-center h-10 input-replacement  svelte-cvpwnt"),b(t,"active",!!a[3]),b(t,"dirty",!!a[4])},m(s,r){d(s,e,r),d(s,u,r),d(s,t,r),i.m(t,null),n||(o=[C(e,"change",a[5]),C(e,"focus",y(a[6]))],n=!0)},p(s,r){r&2&&c(e,"name",s[1]),r&4&&(e.required=s[2]),l===(l=f(s))&&i?i.p(s,r):(i.d(1),i=l(s),i&&(i.c(),i.m(t,null))),r&8&&b(t,"active",!!s[3]),r&16&&b(t,"dirty",!!s[4])},d(s){s&&m(e),s&&m(u),s&&m(t),i.d(),n=!1,G(o)}}}function x(a){let e,u;return e=new V({props:{label:a[0],required:a[2],$$slots:{default:[Z]},$$scope:{ctx:a}}}),{c(){h(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,n){v(e,t,n),u=!0},p(t,[n]){const o={};n&1&&(o.label=t[0]),n&4&&(o.required=t[2]),n&158&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){u||(E(e.$$.fragment,t),u=!0)},o(t){q(e.$$.fragment,t),u=!1},d(t){w(e,t)}}}function ee(a,e,u){let{label:t=void 0}=e,{name:n=void 0}=e,{required:o=!1}=e,f,l=!1;const i=r=>{var p;return u(3,f=(p=r.currentTarget.files)==null?void 0:p[0])},s=()=>u(4,l=!0);return a.$$set=r=>{"label"in r&&u(0,t=r.label),"name"in r&&u(1,n=r.name),"required"in r&&u(2,o=r.required)},[t,n,o,f,l,i,s]}class te extends S{constructor(e){super(),A(this,e,ee,x,M,{label:0,name:1,required:2})}}function ue(a){let e,u;return e=new te({props:{slot:"pre-basic",name:"source_img",label:"Исходное изображение",required:!0}}),{c(){h(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,n){v(e,t,n),u=!0},p:R,i(t){u||(E(e.$$.fragment,t),u=!0)},o(t){q(e.$$.fragment,t),u=!1},d(t){w(e,t)}}}function se(a){let e,u;return e=new J({props:{slot:"post-advanced",name:"denoising_strength",label:"Denoising strength",min:0,max:1,step:.05,defaultValue:.7}}),{c(){h(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,n){v(e,t,n),u=!0},p:R,i(t){u||(E(e.$$.fragment,t),u=!0)},o(t){q(e.$$.fragment,t),u=!1},d(t){w(e,t)}}}function ne(a){let e,u,t,n,o,f;function l(s){a[3](s)}let i={onSubmit:a[2],parseExtra:ae,$$slots:{"post-advanced":[se],"pre-basic":[ue]},$$scope:{ctx:a}};return a[0]!==void 0&&(i.form=a[0]),n=new z({props:i}),N.push(()=>j(n,"form",l)),n.$on("input",a[1]),{c(){e=_("h1"),u=I("IMG -> IMG"),t=F(),h(n.$$.fragment),this.h()},l(s){e=g(s,"H1",{class:!0});var r=D(e);u=k(r,"IMG -> IMG"),r.forEach(m),t=B(s),$(n.$$.fragment,s),this.h()},h(){c(e,"class","text-center text-3xl")},m(s,r){d(s,e,r),U(e,u),d(s,t,r),v(n,s,r),f=!0},p(s,[r]){const p={};r&16&&(p.$$scope={dirty:r,ctx:s}),!o&&r&1&&(o=!0,p.form=s[0],O(()=>o=!1)),n.$set(p)},i(s){f||(E(n.$$.fragment,s),f=!0)},o(s){q(n.$$.fragment,s),f=!1},d(s){s&&m(e),s&&m(t),w(n,s)}}}function ae({source_img:a,denoising_strength:e,...u}){const t={...u,denoising_strength:Number(e)};return a instanceof File?new Promise((n,o)=>{const f=new FileReader;f.onload=()=>{var l,i;return n({...t,source_img:((i=(l=String(f.result)).split)==null?void 0:i.call(l,",")[1])||null})},f.onerror=o,f.readAsDataURL(a)}):t}function re(a,e,u){let t;function n(){Q(t.checkValidity())}function o(l){try{console.log(l),W(l)}catch{K(!1),alert("Передано слишком большое изображение. Мы работаем над улучшением процесса, пока доступны только изображения меньше 2кб.")}}T(()=>H(()=>t.requestSubmit()));function f(l){t=l,u(0,t)}return[t,n,o,f]}class oe extends S{constructor(e){super(),A(this,e,re,ne,M,{})}}export{oe as default};
