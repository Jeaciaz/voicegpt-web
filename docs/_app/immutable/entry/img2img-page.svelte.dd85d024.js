import{S as U,i as B,s as D,y as h,z as $,A as v,g as q,d as w,B as I,k as _,a as k,l as g,c as R,m as S,h as m,n as c,N as b,b as p,O as M,P as O,Q as P,q as L,r as E,M as y,J as G,u as V,E as F,w as j,R as A,T as J,o as T}from"../chunks/index.98711fea.js";import{L as C,S as z,s as H,R as Q,a as W,b as N,g as K,c as X,p as Y}from"../chunks/SDForm.648217c6.js";function Z(r){let e,s,t,n,f=r[3].name+"",o;return{c(){e=_("img"),t=k(),n=_("span"),o=L(f),this.h()},l(u){e=g(u,"IMG",{src:!0,alt:!0,class:!0}),t=R(u),n=g(u,"SPAN",{class:!0});var l=S(n);o=E(l,f),l.forEach(m),this.h()},h(){y(e.src,s=URL.createObjectURL(r[3]))||c(e,"src",s),c(e,"alt",""),c(e,"class","pr-2 h-8"),c(n,"class","whitespace-nowrap overflow-x-hidden text-ellipsis")},m(u,l){p(u,e,l),p(u,t,l),p(u,n,l),G(n,o)},p(u,l){l&8&&!y(e.src,s=URL.createObjectURL(u[3]))&&c(e,"src",s),l&8&&f!==(f=u[3].name+"")&&V(o,f)},d(u){u&&m(e),u&&m(t),u&&m(n)}}}function x(r){let e;return{c(){e=L("Выбрать изображение...")},l(s){e=E(s,"Выбрать изображение...")},m(s,t){p(s,e,t)},p:F,d(s){s&&m(e)}}}function ee(r){let e,s,t,n,f;function o(a,i){return a[3]?Z:x}let u=o(r),l=u(r);return{c(){e=_("input"),s=k(),t=_("div"),l.c(),this.h()},l(a){e=g(a,"INPUT",{type:!0,name:!0,class:!0,accept:!0}),s=R(a),t=g(a,"DIV",{class:!0});var i=S(t);l.l(i),i.forEach(m),this.h()},h(){c(e,"type","file"),c(e,"name",r[1]),e.required=r[2],c(e,"class","absolute opacity-0 svelte-cvpwnt"),c(e,"accept","image/png,image/jpeg"),c(t,"class","p-1 border rounded flex items-center h-10 input-replacement  svelte-cvpwnt"),b(t,"active",!!r[3]),b(t,"dirty",!!r[4])},m(a,i){p(a,e,i),p(a,s,i),p(a,t,i),l.m(t,null),n||(f=[M(e,"change",r[5]),M(e,"focus",O(r[6]))],n=!0)},p(a,i){i&2&&c(e,"name",a[1]),i&4&&(e.required=a[2]),u===(u=o(a))&&l?l.p(a,i):(l.d(1),l=u(a),l&&(l.c(),l.m(t,null))),i&8&&b(t,"active",!!a[3]),i&16&&b(t,"dirty",!!a[4])},d(a){a&&m(e),a&&m(s),a&&m(t),l.d(),n=!1,P(f)}}}function te(r){let e,s;return e=new C({props:{label:r[0],required:r[2],$$slots:{default:[ee]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,n){v(e,t,n),s=!0},p(t,[n]){const f={};n&1&&(f.label=t[0]),n&4&&(f.required=t[2]),n&158&&(f.$$scope={dirty:n,ctx:t}),e.$set(f)},i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function se(r,e,s){let{label:t=void 0}=e,{name:n=void 0}=e,{required:f=!1}=e,o,u=!1;const l=i=>{var d;return s(3,o=(d=i.currentTarget.files)==null?void 0:d[0])},a=()=>s(4,u=!0);return r.$$set=i=>{"label"in i&&s(0,t=i.label),"name"in i&&s(1,n=i.name),"required"in i&&s(2,f=i.required)},[t,n,f,o,u,l,a]}class ae extends U{constructor(e){super(),B(this,e,se,te,D,{label:0,name:1,required:2})}}function ne(r){let e,s;return e=new ae({props:{slot:"pre-basic",name:"source_img",label:"Исходное изображение",required:!0}}),{c(){h(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,n){v(e,t,n),s=!0},p:F,i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function re(r){let e,s;return e=new Q({props:{slot:"post-advanced",name:"denoising_strength",label:"Denoising strength",min:0,max:1,step:.05,defaultValue:.7}}),{c(){h(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,n){v(e,t,n),s=!0},p:F,i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function le(r){let e,s,t,n,f,o;function u(a){r[3](a)}let l={onSubmit:r[2],parseExtra:ie,$$slots:{"post-advanced":[re],"pre-basic":[ne]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.form=r[0]),n=new z({props:l}),j.push(()=>A(n,"form",u)),n.$on("input",r[1]),{c(){e=_("h1"),s=L("IMG -> IMG"),t=k(),h(n.$$.fragment),this.h()},l(a){e=g(a,"H1",{class:!0});var i=S(e);s=E(i,"IMG -> IMG"),i.forEach(m),t=R(a),$(n.$$.fragment,a),this.h()},h(){c(e,"class","text-center text-3xl")},m(a,i){p(a,e,i),G(e,s),p(a,t,i),v(n,a,i),o=!0},p(a,[i]){const d={};i&16&&(d.$$scope={dirty:i,ctx:a}),!f&&i&1&&(f=!0,d.form=a[0],J(()=>f=!1)),n.$set(d)},i(a){o||(q(n.$$.fragment,a),o=!0)},o(a){w(n.$$.fragment,a),o=!1},d(a){a&&m(e),a&&m(t),I(n,a)}}}function ie({source_img:r,denoising_strength:e,...s}){const t={...s,denoising_strength:Number(e)};return r instanceof File?new Promise((n,f)=>{const o=new FileReader;o.onload=()=>{var u,l;return n({...t,source_img:((l=(u=String(o.result)).split)==null?void 0:l.call(u,",")[1])||null})},o.onerror=f,o.readAsDataURL(r)}):t}function ue(r,e,s){let t;function n(){W(t.checkValidity())}function f(u){N(!0),K(JSON.stringify(u)).then(l=>{X(l)}).catch(l=>{N(!1),Y(l,JSON.stringify,alert)})}T(()=>H(()=>t.requestSubmit()));function o(u){t=u,s(0,t)}return[t,n,f,o]}class ce extends U{constructor(e){super(),B(this,e,ue,le,D,{})}}export{ce as default};
