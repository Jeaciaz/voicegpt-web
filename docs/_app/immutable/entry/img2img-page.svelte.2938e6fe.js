import{S as G,i as U,s as N,y as h,z as $,A as v,g as q,d as w,B as k,k as _,a as I,l as g,c as R,m as S,h as m,n as c,L as b,b as p,M as y,N as B,O as D,q as L,r as F,K as E,G as P,u as O,H as M,w as j,P as A,Q as V,o as H}from"../chunks/index.4cd36e52.js";import{L as T,S as z,s as C,R as J,a as K,b as Q}from"../chunks/SDForm.d5a6b03b.js";function W(a){let e,s,t,r,o=a[3].name+"",f;return{c(){e=_("img"),t=I(),r=_("span"),f=L(o),this.h()},l(i){e=g(i,"IMG",{src:!0,alt:!0,class:!0}),t=R(i),r=g(i,"SPAN",{class:!0});var u=S(r);f=F(u,o),u.forEach(m),this.h()},h(){E(e.src,s=URL.createObjectURL(a[3]))||c(e,"src",s),c(e,"alt",""),c(e,"class","pr-2 h-8"),c(r,"class","whitespace-nowrap overflow-x-hidden text-ellipsis")},m(i,u){p(i,e,u),p(i,t,u),p(i,r,u),P(r,f)},p(i,u){u&8&&!E(e.src,s=URL.createObjectURL(i[3]))&&c(e,"src",s),u&8&&o!==(o=i[3].name+"")&&O(f,o)},d(i){i&&m(e),i&&m(t),i&&m(r)}}}function X(a){let e;return{c(){e=L("Выбрать изображение...")},l(s){e=F(s,"Выбрать изображение...")},m(s,t){p(s,e,t)},p:M,d(s){s&&m(e)}}}function Y(a){let e,s,t,r,o;function f(n,l){return n[3]?W:X}let i=f(a),u=i(a);return{c(){e=_("input"),s=I(),t=_("div"),u.c(),this.h()},l(n){e=g(n,"INPUT",{type:!0,name:!0,class:!0,accept:!0}),s=R(n),t=g(n,"DIV",{class:!0});var l=S(t);u.l(l),l.forEach(m),this.h()},h(){c(e,"type","file"),c(e,"name",a[1]),e.required=a[2],c(e,"class","absolute opacity-0 svelte-cvpwnt"),c(e,"accept","image/png,image/jpeg"),c(t,"class","p-1 border rounded flex items-center h-10 input-replacement  svelte-cvpwnt"),b(t,"active",!!a[3]),b(t,"dirty",!!a[4])},m(n,l){p(n,e,l),p(n,s,l),p(n,t,l),u.m(t,null),r||(o=[y(e,"change",a[5]),y(e,"focus",B(a[6]))],r=!0)},p(n,l){l&2&&c(e,"name",n[1]),l&4&&(e.required=n[2]),i===(i=f(n))&&u?u.p(n,l):(u.d(1),u=i(n),u&&(u.c(),u.m(t,null))),l&8&&b(t,"active",!!n[3]),l&16&&b(t,"dirty",!!n[4])},d(n){n&&m(e),n&&m(s),n&&m(t),u.d(),r=!1,D(o)}}}function Z(a){let e,s;return e=new T({props:{label:a[0],required:a[2],$$slots:{default:[Y]},$$scope:{ctx:a}}}),{c(){h(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,r){v(e,t,r),s=!0},p(t,[r]){const o={};r&1&&(o.label=t[0]),r&4&&(o.required=t[2]),r&158&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function x(a,e,s){let{label:t=void 0}=e,{name:r=void 0}=e,{required:o=!1}=e,f,i=!1;const u=l=>{var d;return s(3,f=(d=l.currentTarget.files)==null?void 0:d[0])},n=()=>s(4,i=!0);return a.$$set=l=>{"label"in l&&s(0,t=l.label),"name"in l&&s(1,r=l.name),"required"in l&&s(2,o=l.required)},[t,r,o,f,i,u,n]}class ee extends G{constructor(e){super(),U(this,e,x,Z,N,{label:0,name:1,required:2})}}function te(a){let e,s;return e=new ee({props:{slot:"pre-basic",name:"source_img",label:"Исходное изображение",required:!0}}),{c(){h(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,r){v(e,t,r),s=!0},p:M,i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function se(a){let e,s;return e=new J({props:{slot:"post-advanced",name:"denoising_strength",label:"Denoising strength",min:0,max:1,step:.05,defaultValue:.7}}),{c(){h(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,r){v(e,t,r),s=!0},p:M,i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function ne(a){let e,s,t,r,o,f;function i(n){a[3](n)}let u={onSubmit:a[2],parseExtra:re,$$slots:{"post-advanced":[se],"pre-basic":[te]},$$scope:{ctx:a}};return a[0]!==void 0&&(u.form=a[0]),r=new z({props:u}),j.push(()=>A(r,"form",i)),r.$on("input",a[1]),{c(){e=_("h1"),s=L("IMG -> IMG"),t=I(),h(r.$$.fragment),this.h()},l(n){e=g(n,"H1",{class:!0});var l=S(e);s=F(l,"IMG -> IMG"),l.forEach(m),t=R(n),$(r.$$.fragment,n),this.h()},h(){c(e,"class","text-center text-3xl")},m(n,l){p(n,e,l),P(e,s),p(n,t,l),v(r,n,l),f=!0},p(n,[l]){const d={};l&16&&(d.$$scope={dirty:l,ctx:n}),!o&&l&1&&(o=!0,d.form=n[0],V(()=>o=!1)),r.$set(d)},i(n){f||(q(r.$$.fragment,n),f=!0)},o(n){w(r.$$.fragment,n),f=!1},d(n){n&&m(e),n&&m(t),k(r,n)}}}function re({source_img:a,denoising_strength:e,...s}){const t={...s,denoising_strength:Number(e)};return a instanceof File?new Promise((r,o)=>{const f=new FileReader;f.onload=()=>{var i,u;return r({...t,source_img:((u=(i=String(f.result)).split)==null?void 0:u.call(i,",")[1])||null})},f.onerror=o,f.readAsDataURL(a)}):t}function ae(a,e,s){let t;function r(){K(t.checkValidity())}function o(i){try{console.log(i),alert("img2img submit"),Q(i)}catch(u){alert(JSON.stringify(u))}}H(()=>C(()=>t.requestSubmit()));function f(i){t=i,s(0,t)}return[t,r,o,f]}class ue extends G{constructor(e){super(),U(this,e,ae,ne,N,{})}}export{ue as default};
