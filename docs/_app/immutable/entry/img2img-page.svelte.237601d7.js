import{S as O,i as P,s as U,y as b,z as $,A as v,g as q,d as w,B as I,k as _,a as S,l as g,c as k,m as R,h as m,n as c,N as h,b as p,O as F,P as D,Q as G,q as y,r as L,M,J as B,u as j,E,w as T,R as A,T as J,o as V}from"../chunks/index.98711fea.js";import{L as z,S as C,s as H,R as Q,a as W,b as N,c as K}from"../chunks/SDForm.bff3e33a.js";function X(l){let e,n,t,r,u=l[3].name+"",f;return{c(){e=_("img"),t=S(),r=_("span"),f=y(u),this.h()},l(i){e=g(i,"IMG",{src:!0,alt:!0,class:!0}),t=k(i),r=g(i,"SPAN",{class:!0});var o=R(r);f=L(o,u),o.forEach(m),this.h()},h(){M(e.src,n=URL.createObjectURL(l[3]))||c(e,"src",n),c(e,"alt",""),c(e,"class","pr-2 h-8"),c(r,"class","whitespace-nowrap overflow-x-hidden text-ellipsis")},m(i,o){p(i,e,o),p(i,t,o),p(i,r,o),B(r,f)},p(i,o){o&8&&!M(e.src,n=URL.createObjectURL(i[3]))&&c(e,"src",n),o&8&&u!==(u=i[3].name+"")&&j(f,u)},d(i){i&&m(e),i&&m(t),i&&m(r)}}}function Y(l){let e;return{c(){e=y("Выбрать изображение...")},l(n){e=L(n,"Выбрать изображение...")},m(n,t){p(n,e,t)},p:E,d(n){n&&m(e)}}}function Z(l){let e,n,t,r,u;function f(s,a){return s[3]?X:Y}let i=f(l),o=i(l);return{c(){e=_("input"),n=S(),t=_("div"),o.c(),this.h()},l(s){e=g(s,"INPUT",{type:!0,name:!0,class:!0,accept:!0}),n=k(s),t=g(s,"DIV",{class:!0});var a=R(t);o.l(a),a.forEach(m),this.h()},h(){c(e,"type","file"),c(e,"name",l[1]),e.required=l[2],c(e,"class","absolute opacity-0 svelte-cvpwnt"),c(e,"accept","image/png,image/jpeg"),c(t,"class","p-1 border rounded flex items-center h-10 input-replacement  svelte-cvpwnt"),h(t,"active",!!l[3]),h(t,"dirty",!!l[4])},m(s,a){p(s,e,a),p(s,n,a),p(s,t,a),o.m(t,null),r||(u=[F(e,"change",l[5]),F(e,"focus",D(l[6]))],r=!0)},p(s,a){a&2&&c(e,"name",s[1]),a&4&&(e.required=s[2]),i===(i=f(s))&&o?o.p(s,a):(o.d(1),o=i(s),o&&(o.c(),o.m(t,null))),a&8&&h(t,"active",!!s[3]),a&16&&h(t,"dirty",!!s[4])},d(s){s&&m(e),s&&m(n),s&&m(t),o.d(),r=!1,G(u)}}}function x(l){let e,n;return e=new z({props:{label:l[0],required:l[2],$$slots:{default:[Z]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const u={};r&1&&(u.label=t[0]),r&4&&(u.required=t[2]),r&158&&(u.$$scope={dirty:r,ctx:t}),e.$set(u)},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function ee(l,e,n){let{label:t=void 0}=e,{name:r=void 0}=e,{required:u=!1}=e,f,i=!1;const o=a=>{var d;return n(3,f=(d=a.currentTarget.files)==null?void 0:d[0])},s=()=>n(4,i=!0);return l.$$set=a=>{"label"in a&&n(0,t=a.label),"name"in a&&n(1,r=a.name),"required"in a&&n(2,u=a.required)},[t,r,u,f,i,o,s]}class te extends O{constructor(e){super(),P(this,e,ee,x,U,{label:0,name:1,required:2})}}function se(l){let e,n;return e=new te({props:{slot:"pre-basic",name:"source_img",label:"Исходное изображение",required:!0}}),{c(){b(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,r){v(e,t,r),n=!0},p:E,i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function ne(l){let e,n;return e=new Q({props:{slot:"post-advanced",name:"denoising_strength",label:"Denoising strength",min:0,max:1,step:.05,defaultValue:.7}}),{c(){b(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,r){v(e,t,r),n=!0},p:E,i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function re(l){let e,n,t,r,u,f;function i(s){l[3](s)}let o={onSubmit:l[2],parseExtra:ae,$$slots:{"post-advanced":[ne],"pre-basic":[se]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.form=l[0]),r=new C({props:o}),T.push(()=>A(r,"form",i)),r.$on("input",l[1]),{c(){e=_("h1"),n=y("IMG -> IMG"),t=S(),b(r.$$.fragment),this.h()},l(s){e=g(s,"H1",{class:!0});var a=R(e);n=L(a,"IMG -> IMG"),a.forEach(m),t=k(s),$(r.$$.fragment,s),this.h()},h(){c(e,"class","text-center text-3xl")},m(s,a){p(s,e,a),B(e,n),p(s,t,a),v(r,s,a),f=!0},p(s,[a]){const d={};a&16&&(d.$$scope={dirty:a,ctx:s}),!u&&a&1&&(u=!0,d.form=s[0],J(()=>u=!1)),r.$set(d)},i(s){f||(q(r.$$.fragment,s),f=!0)},o(s){w(r.$$.fragment,s),f=!1},d(s){s&&m(e),s&&m(t),I(r,s)}}}function ae({source_img:l,denoising_strength:e,...n}){const t={...n,denoising_strength:Number(e)};return l instanceof File?new Promise((r,u)=>{const f=new FileReader;f.onload=()=>{var i,o;return r({...t,source_img:((o=(i=String(f.result)).split)==null?void 0:o.call(i,",")[1])||null})},f.onerror=u,f.readAsDataURL(l)}):t}function le(l,e,n){let t;function r(){W(t.checkValidity())}function u(i){N(!0);const s=fetch("https://voicechatgpt.ru/cache/",{method:"POST",body:JSON.stringify(i)}).then(a=>a.json());try{K(s)}catch(a){N(!1),alert(JSON.stringify(a))}}V(()=>H(()=>t.requestSubmit()));function f(i){t=i,n(0,t)}return[t,r,u,f]}class ue extends O{constructor(e){super(),P(this,e,le,re,U,{})}}export{ue as default};
